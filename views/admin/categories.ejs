<%- include('../_layouts/adminheader') %>
    <br>
    <h2 class="page-title">Categories</h2>
    <a href="/admin/categories/add-category" class="btn btn-secondary">
        << Add new category</a>
            <br><br>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% categories.forEach( function(cat) { %>
                        <tr>
                            <td>
                                <%= cat.title %>
                            </td>
                            <td><a href="/admin/categories/edit-category/<%= cat.slug %>">Edit</a></td>
                            <td><a class="confirmDeletion" href="/admin/categories/delete-category/<%= cat.id %>">Delete</a></td>
                        </tr>
                        <% }); %>
                </tbody>
            </table>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
            <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>

            <script>
                $("table tbody").sortable({

                    items: "tr:not('.home')",
                    placeholder: "ui-state-highlight",
                    update: function() {
                        var ids = $('tbody').sortable("serialize");
                        var url = "/admin/pages/reorder-pages";

                        $.post(url, ids);
                    }
                });
            </script>


            <%- include('../_layouts/adminfooter') %>